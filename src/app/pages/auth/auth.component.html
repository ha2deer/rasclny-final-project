<div class="container mt-5 mb-5">
  <div class="row align-items-center">
    <!-- Authentication Image -->
    <div class="col-lg-6 d-none d-lg-flex justify-content-center">
      <img src="assets/auth.png" alt="Authentication Image" class="img-fluid" style="max-height: 400px;" />
    </div>

    <!-- Form Section -->
    <div class="col-lg-6">
      <div class="card shadow border-0">
        <div class="card-body">
          <!-- Form Title -->
          <h3 class="card-title text-center mb-4">{{ mode === 'signup' ? 'Sign Up' : 'Sign In' }}</h3>

          <!-- Form -->
          <form [formGroup]="applyForm" (ngSubmit)="submitHandler()">
            <!-- Error Message Display -->
            <div *ngIf="errors" class="alert alert-danger">
              {{ errors.message }}
            </div>

            <!-- Username Field (Visible in Signup Mode) -->
            <div *ngIf="mode === 'signup'" class="mb-3">
              <label for="username" class="form-label">Username</label>
              <input
                formControlName="username"
                id="username"
                type="text"
                class="form-control"
                placeholder="Enter your username"
              />
              <div *ngIf="isValid('username')" class="text-danger">
                <small *ngIf="usernameControl?.errors?.['required']">Username is required.</small>
                <small *ngIf="usernameControl?.errors?.['serverError']">
                  {{ usernameControl?.errors?.['serverError'] }}
                </small>
              </div>
            </div>

            <!-- Email Field -->
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input
                formControlName="email"
                id="email"
                type="email"
                class="form-control"
                placeholder="name@email.com"
              />
              <div
                *ngIf="
                  emailControl?.invalid &&
                  (isFormSubmitted || emailControl?.touched || emailControl?.dirty)
                "
                class="text-danger"
              >
                <small *ngIf="emailControl?.errors?.['required']">Email is required.</small>
                <small *ngIf="emailControl?.errors?.['email']">Must be a valid email address.</small>
                <small *ngIf="emailControl?.errors?.['serverError']">
                  {{ emailControl?.errors?.['serverError'] }}
                </small>
              </div>
            </div>

            <!-- Phone Field (Visible in Signup Mode) -->
            <div *ngIf="mode === 'signup'" class="mb-3">
              <label for="phone" class="form-label">Phone</label>
              <input
                formControlName="phone"
                id="phone"
                type="text"
                class="form-control"
                placeholder="Enter your phone number"
              />
              <div *ngIf="isValid('phone')" class="text-danger">
                <small *ngIf="phoneControl?.errors?.['required']">Phone number is required.</small>
                <small *ngIf="phoneControl?.errors?.['pattern']">Invalid phone number format.</small>
                <small *ngIf="phoneControl?.errors?.['serverError']">
                  {{ phoneControl?.errors?.['serverError'] }}
                </small>
              </div>
            </div>

            <!-- Gender Field (Visible in Signup Mode) -->
            <div *ngIf="mode === 'signup'" class="mb-3">
              <label for="gender" class="form-label">Select Gender</label>
              <select formControlName="gender" id="gender" class="form-select">
                <option value="" disabled>Select your gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
              <div *ngIf="isValid('gender')" class="text-danger">
                <small *ngIf="applyForm.controls['gender']?.errors?.['required']">Gender is required.</small>
              </div>
            </div>

            <!-- Password Field -->
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <input
                formControlName="password"
                id="password"
                type="password"
                class="form-control"
                placeholder="Enter your password"
              />
              <div
                *ngIf="
                  passwordControl?.invalid &&
                  (isFormSubmitted || passwordControl?.touched || passwordControl?.dirty)
                "
                class="text-danger"
              >
                <small *ngIf="passwordControl?.errors?.['required']">Password is required.</small>
                <small *ngIf="passwordControl?.errors?.['minlength']">Password must be at least 6 characters.</small>
                <small *ngIf="passwordControl?.errors?.['serverError']">
                  {{ passwordControl?.errors?.['serverError'] }}
                </small>
              </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-success btn-block" [disabled]="disabled">
              {{ mode === 'signup' ? 'Sign Up' : 'Sign In' }}
            </button>
          </form>

          <!-- Navigation Links -->
          <div class="text-center mt-3">
            <p *ngIf="mode === 'signup'">
              Already have an account?
              <a (click)="navigateTo('login')" class="text-success" style="cursor: pointer;">Log In</a>
            </p>
            <p *ngIf="mode === 'login'">
              Don't have an account?
              <a (click)="navigateTo('signup')" class="text-success" style="cursor: pointer;">Sign Up</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
